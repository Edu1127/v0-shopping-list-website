(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14691,e=>{"use strict";var t=e.i(17927);async function s(e){try{let{data:s,error:r}=await t.supabase.from("shopping_lists").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(r)throw r;return{lists:s,error:null}}catch(e){return{lists:[],error:e}}}async function r(e,s,r){try{let{data:a,error:l}=await t.supabase.from("shopping_lists").insert([{user_id:e,name:s,description:r||null}]).select().single();if(l)throw l;return{list:a,error:null}}catch(e){return{list:null,error:e}}}async function a(e,s){try{let{data:r,error:a}=await t.supabase.from("shopping_lists").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return{list:r,error:null}}catch(e){return{list:null,error:e}}}async function l(e){try{let{error:s}=await t.supabase.from("shopping_lists").delete().eq("id",e);if(s)throw s;return{error:null}}catch(e){return{error:e}}}async function i(e){try{let{data:s,error:r}=await t.supabase.from("shopping_list_items").select("*").eq("list_id",e).order("created_at",{ascending:!0});if(r)throw r;return{items:s,error:null}}catch(e){return{items:[],error:e}}}async function n(e,s,r=1){try{let{data:a,error:l}=await t.supabase.from("shopping_list_items").insert([{list_id:e,name:s,quantity:r}]).select().single();if(l)throw l;return{item:a,error:null}}catch(e){return{item:null,error:e}}}async function o(e,s){try{let{data:r,error:a}=await t.supabase.from("shopping_list_items").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return{item:r,error:null}}catch(e){return{item:null,error:e}}}async function c(e){try{let{error:s}=await t.supabase.from("shopping_list_items").delete().eq("id",e);if(s)throw s;return{error:null}}catch(e){return{error:e}}}function d(e,s){let r=t.supabase.channel(`items-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"shopping_list_items",filter:`list_id=eq.${e}`},async t=>{await new Promise(e=>setTimeout(e,100));let{items:r}=await i(e);s(r)}).subscribe();return()=>{t.supabase.removeChannel(r)}}function m(e,r){let a=t.supabase.channel(`lists-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"shopping_lists",filter:`user_id=eq.${e}`},async t=>{await new Promise(e=>setTimeout(e,100));let{lists:a}=await s(e);r(a)}).subscribe();return()=>{t.supabase.removeChannel(a)}}async function h(e,s){try{let{data:r,error:a}=await t.supabase.from("shopping_list_items").update({completed:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return{item:r,error:null}}catch(e){return{item:null,error:e}}}e.s(["addShoppingListItem",()=>n,"createShoppingList",()=>r,"deleteShoppingList",()=>l,"deleteShoppingListItem",()=>c,"getShoppingListItems",()=>i,"getShoppingLists",()=>s,"subscribeToShoppingListItems",()=>d,"subscribeToShoppingLists",()=>m,"toggleShoppingListItem",()=>h,"updateShoppingList",()=>a,"updateShoppingListItem",()=>o])},31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(94433),a=e.i(38036);let l=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:c,...d},m)=>(0,s.createElement)("svg",{ref:m,...i,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:l("lucide",n),...d},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...a},i)=>(0,s.createElement)(n,{ref:i,iconNode:t,className:l(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...a}));return r.displayName=`${e}`,r},c=o("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d=o("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),m=o("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),h=o("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function x({onLogin:e}){let[r,l]=(0,s.useState)(""),[i,n]=(0,s.useState)(""),[o,x]=(0,s.useState)(""),[u,g]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),j=async t=>{t.preventDefault(),f(""),y(!0);try{if(u){if(!o||!r||!i){f("Por favor preencha todos os campos"),y(!1);return}let{user:t,error:s}=await (0,a.signUp)(r,i,o);if(s){f(s.message||"Erro ao criar conta"),y(!1);return}t&&e(o)}else{if(!r||!i){f("Por favor preencha email e senha"),y(!1);return}let{user:t,error:s}=await (0,a.signIn)(r,i);if(s){f(s.message||"Erro ao entrar"),y(!1);return}t&&e(r.split("@")[0])}}catch(e){f("Ocorreu um erro inesperado"),y(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(m,{className:"w-8 h-8 text-yellow-500"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-yellow-500",children:"ShopList"})]}),(0,t.jsx)("p",{className:"text-gray-700",children:"Organize suas compras com facilidade"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:u?"Criar Conta":"Entrar"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo"}),(0,t.jsx)("input",{id:"name",type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent disabled:bg-gray-100 placeholder-gray-600",placeholder:"Seu nome",disabled:p})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent disabled:bg-gray-100 placeholder-gray-600",placeholder:"seu@email.com",disabled:p})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{id:"password",type:"password",value:i,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent disabled:bg-gray-100 placeholder-gray-600",placeholder:"Sua senha",disabled:p})]})]}),b&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm",children:b}),(0,t.jsxs)("button",{type:"submit",disabled:p,className:"w-full bg-yellow-400 text-white font-semibold py-2 rounded-lg hover:bg-yellow-500 transition-colors duration-200 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&(0,t.jsx)(h,{className:"w-4 h-4 animate-spin"}),u?"Criar Conta":"Entrar"]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600 text-sm",children:[u?"Já tem conta?":"Não tem conta?"," ",(0,t.jsx)("button",{onClick:()=>{g(!u),x(""),l(""),n(""),f("")},disabled:p,className:"text-yellow-500 font-semibold hover:underline disabled:text-gray-400",children:u?"Entrar":"Cadastrar"})]})})]}),(0,t.jsx)("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-700 font-medium",children:[(0,t.jsx)("strong",{children:"Autenticação:"})," Use um email e senha para criar uma conta ou fazer login. Os dados são salvos no Supabase."]})})]})})}let u=o("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),g=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=e.i(14691);let y=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=o("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f=o("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function j({list:e,onSelect:s,onDelete:r}){let a=e.items||[],l=a.filter(e=>e.completed).length,i=a.length;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-100",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString("pt-BR")})]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),r()},className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Deletar lista",children:(0,t.jsx)(y,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Progresso"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-yellow-500",children:[i>0?Math.round(l/i*100):0,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:i>0?`${l/i*100}%`:"0%"}})})]}),(0,t.jsx)("div",{className:"mb-4",children:i>0?(0,t.jsxs)("div",{className:"space-y-2",children:[a.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.completed?(0,t.jsx)(f,{className:"w-4 h-4 text-green-500 flex-shrink-0"}):(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full flex-shrink-0"}),(0,t.jsxs)("span",{className:e.completed?"line-through text-gray-400":"",children:[e.name," (",e.quantity,"x)"]})]},e.id)),i>2&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 pt-2",children:["+ ",i-2," itens"]})]}):(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Nenhum item adicionado"})}),(0,t.jsxs)("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-yellow-400 text-white font-semibold py-2 rounded-lg hover:bg-yellow-500 transition-colors",children:["Abrir",(0,t.jsx)(b,{className:"w-4 h-4"})]})]})})}let w=o("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function N({onClose:e,onCreate:r}){let[a,l]=(0,s.useState)("");return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Lista"}),(0,t.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fechar",children:(0,t.jsx)(w,{className:"w-6 h-6"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(r(a),l(""))},className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"listName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Lista"}),(0,t.jsx)("input",{id:"listName",type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Ex: Supermercado, Farmácia...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent placeholder-gray-600",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:!a.trim(),className:"flex-1 px-4 py-2 bg-yellow-400 text-white rounded-lg font-medium hover:bg-yellow-500 disabled:bg-gray-300 transition-colors",children:"Criar Lista"})]})]})]})})}let v=o("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),k=o("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function S({onClose:e,onAdd:r}){let[a,l]=(0,s.useState)(""),[i,n]=(0,s.useState)(1);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Adicionar Item"}),(0,t.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fechar",children:(0,t.jsx)(w,{className:"w-6 h-6"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(r(a,i),l(""),n(1))},className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"itemName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Item"}),(0,t.jsx)("input",{id:"itemName",type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Ex: Leite, Pão...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent placeholder-gray-600",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),(0,t.jsx)("input",{id:"quantity",type:"number",min:"1",value:i,onChange:e=>n(Math.max(1,Number.parseInt(e.target.value)||1)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent placeholder-gray-600"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:!a.trim(),className:"flex-1 px-4 py-2 bg-yellow-400 text-white rounded-lg font-medium hover:bg-yellow-500 disabled:bg-gray-300 transition-colors",children:"Adicionar"})]})]})]})})}function C({list:e,onBack:r,onAddItem:a,onToggleItem:l,onDeleteItem:i,onLogout:n}){let[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(e.items||[]),[h,x]=(0,s.useState)(!e.items);async function b(){try{let{items:t}=await (0,p.getShoppingListItems)(e.id);m(t)}catch(e){console.error("Error loading items:",e)}finally{x(!1)}}(0,s.useEffect)(()=>{e.items||b();let t=(0,p.subscribeToShoppingListItems)(e.id,e=>{m(e)});return()=>{t()}},[e.id,e.items]);let f=d.filter(e=>e.completed).length;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("button",{onClick:r,className:"flex items-center gap-2 text-yellow-500 font-semibold hover:text-yellow-600 transition-colors",children:[(0,t.jsx)(v,{className:"w-5 h-5"}),"Voltar"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 flex-1 text-center",children:e.name}),(0,t.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)(u,{className:"w-5 h-5"}),"Sair"]})]})}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progresso"}),(0,t.jsxs)("div",{className:"flex items-end gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-yellow-400 h-3 rounded-full transition-all duration-300",style:{width:d.length>0?`${f/d.length*100}%`:"0%"}})})}),(0,t.jsxs)("span",{className:"text-xl font-bold text-yellow-500",children:[d.length>0?Math.round(f/d.length*100):0,"%"]})]}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm mt-3",children:[f," de ",d.length," itens marcados"]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-yellow-400 text-white px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:[(0,t.jsx)(g,{className:"w-5 h-5"}),"Adicionar Item"]})}),(0,t.jsx)("div",{className:"space-y-3",children:h?(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando itens..."}):d.length>0?(0,t.jsxs)(t.Fragment,{children:[d.filter(e=>!e.completed).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-3 uppercase",children:"Pendente"}),(0,t.jsx)("div",{className:"space-y-2",children:d.filter(e=>!e.completed).map(s=>(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 flex items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("button",{onClick:()=>l(e.id,s.id),className:"flex-shrink-0 w-6 h-6 border-2 border-gray-300 rounded-full hover:border-yellow-400 transition-colors flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-gray-900 font-medium",children:s.name}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Quantidade: ",s.quantity]})]}),(0,t.jsx)("button",{onClick:()=>i(e.id,s.id),className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Deletar item",children:(0,t.jsx)(y,{className:"w-5 h-5"})})]},s.id))})]}),f>0&&(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-3 uppercase",children:"Concluído"}),(0,t.jsx)("div",{className:"space-y-2",children:d.filter(e=>e.completed).map(s=>(0,t.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 flex items-center gap-4 shadow-sm border border-green-100",children:[(0,t.jsx)("button",{onClick:()=>l(e.id,s.id),className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 transition-colors",children:(0,t.jsx)(k,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-gray-500 font-medium line-through",children:s.name}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm",children:["Quantidade: ",s.quantity]})]}),(0,t.jsx)("button",{onClick:()=>i(e.id,s.id),className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Deletar item",children:(0,t.jsx)(y,{className:"w-5 h-5"})})]},s.id))})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"Nenhum item adicionado"}),(0,t.jsx)("button",{onClick:()=>c(!0),className:"bg-yellow-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Adicionar Primeiro Item"})]})})]}),o&&(0,t.jsx)(S,{onClose:()=>c(!1),onAdd:(t,s)=>{a(e.id,t,s),c(!1)}})]})}function L({userName:a,onLogout:l}){let{user:i}=(0,r.useAuth)(),[n,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!1),[x,y]=(0,s.useState)(null);async function b(){try{if(!i)return;d(!0);let{lists:e}=await (0,p.getShoppingLists)(i.id);o(e)}catch(e){console.error("Error loading lists:",e)}finally{d(!1)}}(0,s.useEffect)(()=>{if(i){b();let e=(0,p.subscribeToShoppingLists)(i.id,e=>{o(e)});return()=>{e()}}},[i]);let f=async e=>{try{if(!i)return;let{list:t}=await (0,p.createShoppingList)(i.id,e);t&&(o([t,...n]),h(!1))}catch(e){console.error("Error creating list:",e)}},w=async e=>{try{await (0,p.deleteShoppingList)(e),o(n.filter(t=>t.id!==e)),x===e&&y(null)}catch(e){console.error("Error deleting list:",e)}},v=async(t,s,r)=>{try{let{addShoppingListItem:a}=await e.A(79429);await a(t,s,r)}catch(e){console.error("Error adding item:",e)}},k=async(t,s)=>{try{let{toggleShoppingListItem:r}=await e.A(79429),a=n.find(e=>e.id===t),l=a?.items?.find(e=>e.id===s);l&&await r(s,!l.completed)}catch(e){console.error("Error toggling item:",e)}},S=async(t,s)=>{try{let{deleteShoppingListItem:t}=await e.A(79429);await t(s)}catch(e){console.error("Error deleting item:",e)}},L=n.find(e=>e.id===x);return L?(0,t.jsx)(C,{list:L,onBack:()=>y(null),onAddItem:v,onToggleItem:k,onDeleteItem:S,onLogout:l}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-yellow-500",children:"ShopList"}),(0,t.jsxs)("p",{className:"text-gray-700 text-sm",children:["Bem-vindo, ",a]})]}),(0,t.jsxs)("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)(u,{className:"w-5 h-5"}),"Sair"]})]})}),(0,t.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Minhas Listas"}),(0,t.jsx)("p",{className:"text-gray-700",children:"Gerencie suas listas de compras"})]}),(0,t.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-yellow-400 text-white px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:[(0,t.jsx)(g,{className:"w-5 h-5"}),"Nova Lista"]})]}),c?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Carregando listas..."})}):n.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>(0,t.jsx)(j,{list:e,onSelect:()=>y(e.id),onDelete:()=>w(e.id)},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"Nenhuma lista criada ainda"}),(0,t.jsx)("button",{onClick:()=>h(!0),className:"bg-yellow-400 text-white px-6 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Criar Primeira Lista"})]})]}),m&&(0,t.jsx)(N,{onClose:()=>h(!1),onCreate:f})]})}function _(){let{user:e,isLoading:l}=(0,r.useAuth)(),[i,n]=(0,s.useState)(""),[o,c]=(0,s.useState)(!0);async function d(){try{if(!e)return;let{profile:t}=await (0,a.getProfile)(e.id);t&&n(t.full_name||t.email.split("@")[0])}catch(e){console.error("Error loading profile:",e)}finally{c(!1)}}(0,s.useEffect)(()=>{e?d():c(!1)},[e]);let m=async()=>{await (0,a.signOut)(),n("")};return l||o?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin",children:(0,t.jsx)("div",{className:"h-12 w-12 border-4 border-yellow-400 border-t-transparent rounded-full"})})}):e?(0,t.jsx)(L,{userName:i,onLogout:m}):(0,t.jsx)(x,{onLogin:e=>{n(e)}})}e.s(["default",()=>_],31713)},79429,e=>{e.v(e=>Promise.resolve().then(()=>e(14691)))}]);